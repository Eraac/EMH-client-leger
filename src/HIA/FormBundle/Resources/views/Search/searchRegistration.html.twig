{% extends 'HIACoreBundle::layout.html.twig' %}

{% block body %}
    <div class="col-lg-12">
        <div class="page-header">
            <h1 class="text-success">Recherche personnalisée</h1>
        </div>
    </div>

    <div class="col-lg-12 text-center">
        <h3 class="inline"><span data-class="label-info" id="1" class="selectableStatus hoveractive label label-info selectableTag">Nouveau</span></h3>
        <h3 class="inline"><span data-class="label-info" id="2" class="selectableStatus hoveractive label label-info selectableTag">En cours</span></h3>
        <h3 class="inline"><span data-class="label-primary" id="3" class="selectableStatus hoveractive label label-primary selectableTag">Validé</span></h3>
        <h3 class="inline"><span data-class="label-success" id="4" class="selectableStatus hoveractive label label-success selectableTag">Accepté</span></h3>
        <h3 class="inline"><span data-class="label-danger" id="5" class="selectableStatus hoveractive label label-danger selectableTag">Refusé</span></h3>
    </div>
    
    <div class="col-lg-12 text-center">
        <div id="submitBy" class="btn-group" data-toggle="buttons">
            <h3>Soumit par</h3>
            
            <label class="btn btn-primary active">
                <input class="selectableSubmit" type="checkbox" id="1" autocomplete="off" checked> Moi
            </label>
            
            <label class="btn btn-primary active">
                <input class="selectableSubmit" type="checkbox" id="2" autocomplete="off" checked> Les autres
            </label>
            
        </div>
        
        <div id="validBy" class="btn-group" data-toggle="buttons">
            <h3>Traité par</h3>
            
            <label class="btn btn-primary active">
                <input class="selectableValid" type="checkbox" id="1" autocomplete="off" checked> Moi
            </label>
            
            <label class="btn btn-primary active">
                <input class="selectableValid" type="checkbox" id="2" autocomplete="off" checked> Les autres
            </label>
            
        </div>
    </div>   

    <div class="col-lg-12 pushtop20">
        
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Utilisateur</th>
                    <th>Statut</th>
                    <th>Date d'envoi</th>
                    <th class="text-center">Accès</th>
                </tr>
            </thead>
            
            <tbody id="listRegistration">
                {% for registration in registrations %}
                <tr>
                    <td>{{ registration.userSubmit.fullName }}</td>
                    <td>
                        {% if registration.pending %}
                            {% set class, value = "info", "En cours" %}
                        {% elseif registration.new %}
                            {% set class, value = "info", "Nouveau" %}
                        {% elseif registration.validate %}
                            {% set class, value = "primary", "Validé" %}
                        {% elseif registration.accept %}
                            {% set class, value = "success", "Accepté" %}
                        {% elseif registration.refuse %}
                            {% set class, value = "danger", "Refusé" %}
                        {% endif %}
                        <span class="label label-{{ class }}">{{ value }}</span>
                    </td>
                    <td>{{ registration.registrationDate|date("d-m-Y à H:i") }}</td>
                    <td class="text-center"><a href="{{ path('HIAFormReadRegistration', {'id': registration.id}) }}"><span class="glyphicon glyphicon-search"></span></a></td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="4">Aucun enregistrement</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

    </div>

{% endblock body %}

{% block css %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/styles.css') }}">
{% endblock css %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset("js/selectStatus.js") }}"></script>
{% endblock javascripts %}